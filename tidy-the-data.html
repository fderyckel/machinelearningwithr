<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Machine Learning with R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="This is a book about machine learning in R">
  <meta name="generator" content="bookdown 0.3.1 and GitBook 2.6.7">

  <meta property="og:title" content="Machine Learning with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book about machine learning in R" />
  <meta name="github-repo" content="fderyckel/machinelearningwithr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Machine Learning with R" />
  
  <meta name="twitter:description" content="This is a book about machine learning in R" />
  

<meta name="author" content="François de Ryckel">


<meta name="date" content="2017-02-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="import-the-data.html">
<link rel="next" href="understand-the-data.html">

<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Machine_Learning_with_R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>2</b> Importing Data</a><ul>
<li class="chapter" data-level="2.1" data-path="using-quantmod.html"><a href="using-quantmod.html"><i class="fa fa-check"></i><b>2.1</b> Using <code>quantmod</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="literature.html"><a href="literature.html"><i class="fa fa-check"></i><b>3</b> Literature</a></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
<li class="chapter" data-level="5" data-path="mushrooms-classification.html"><a href="mushrooms-classification.html"><i class="fa fa-check"></i><b>5</b> Mushrooms Classification</a><ul>
<li class="chapter" data-level="5.1" data-path="import-the-data.html"><a href="import-the-data.html"><i class="fa fa-check"></i><b>5.1</b> Import the data</a></li>
<li class="chapter" data-level="5.2" data-path="tidy-the-data.html"><a href="tidy-the-data.html"><i class="fa fa-check"></i><b>5.2</b> Tidy the data</a></li>
<li class="chapter" data-level="5.3" data-path="understand-the-data.html"><a href="understand-the-data.html"><i class="fa fa-check"></i><b>5.3</b> Understand the data</a><ul>
<li class="chapter" data-level="5.3.1" data-path="understand-the-data.html"><a href="understand-the-data.html#a.-transform-the-data"><i class="fa fa-check"></i><b>5.3.1</b> A. Transform the data</a></li>
<li class="chapter" data-level="5.3.2" data-path="understand-the-data.html"><a href="understand-the-data.html#a.-visualize-the-data"><i class="fa fa-check"></i><b>5.3.2</b> A. Visualize the data</a></li>
<li class="chapter" data-level="5.3.3" data-path="understand-the-data.html"><a href="understand-the-data.html#a.-modeling"><i class="fa fa-check"></i><b>5.3.3</b> A. Modeling</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="communication.html"><a href="communication.html"><i class="fa fa-check"></i><b>5.4</b> Communication</a></li>
<li class="chapter" data-level="5.5" data-path="example-one.html"><a href="example-one.html"><i class="fa fa-check"></i><b>5.5</b> Example one</a></li>
<li class="chapter" data-level="5.6" data-path="example-two.html"><a href="example-two.html"><i class="fa fa-check"></i><b>5.6</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>6</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Machine Learning with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-the-data" class="section level2">
<h2><span class="header-section-number">5.2</span> Tidy the data</h2>
<p>This is the least fun part of the workflow.<br />
We’ll start by giving names to each of the variables, then we specify the category for each variable. It is not necessary to do so but it does add meaning to what we do.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Rename the variables</span>
<span class="kw">colnames</span>(mushroom) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;edibility&quot;</span>, <span class="st">&quot;cap_shape&quot;</span>, <span class="st">&quot;cap_surface&quot;</span>, 
                        <span class="st">&quot;cap_color&quot;</span>, <span class="st">&quot;bruises&quot;</span>, <span class="st">&quot;odor&quot;</span>, 
                        <span class="st">&quot;gill_attachement&quot;</span>, <span class="st">&quot;gill_spacing&quot;</span>, <span class="st">&quot;gill_size&quot;</span>, 
                        <span class="st">&quot;gill_color&quot;</span>, <span class="st">&quot;stalk_shape&quot;</span>, <span class="st">&quot;stalk_root&quot;</span>, 
                        <span class="st">&quot;stalk_surface_above_ring&quot;</span>, <span class="st">&quot;stalk_surface_below_ring&quot;</span>, <span class="st">&quot;stalk_color_above_ring&quot;</span>, 
                        <span class="st">&quot;stalk_color_below_ring&quot;</span>, <span class="st">&quot;veil_type&quot;</span>, <span class="st">&quot;veil_color&quot;</span>, 
                        <span class="st">&quot;ring_number&quot;</span>, <span class="st">&quot;ring_type&quot;</span>, <span class="st">&quot;spore_print_color&quot;</span>, 
                        <span class="st">&quot;population&quot;</span>, <span class="st">&quot;habitat&quot;</span>)

<span class="co"># Defining the levels for the categorical variables </span>
## We make each variable as a factor
<span class="kw">library</span>(purrr)
mushroom &lt;-<span class="st"> </span>mushroom %&gt;%<span class="st"> </span><span class="kw">map_df</span>(function(.x) <span class="kw">as.factor</span>(.x))

## We redefine each of the category for each of the variables
<span class="kw">levels</span>(mushroom$edibility) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;edible&quot;</span>, <span class="st">&quot;poisonous&quot;</span>)
<span class="kw">levels</span>(mushroom$cap_shape) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;bell&quot;</span>, <span class="st">&quot;conical&quot;</span>, <span class="st">&quot;flat&quot;</span>, <span class="st">&quot;knobbed&quot;</span>, <span class="st">&quot;sunken&quot;</span>, <span class="st">&quot;convex&quot;</span>)
<span class="kw">levels</span>(mushroom$cap_color) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;buff&quot;</span>, <span class="st">&quot;cinnamon&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;gray&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;pink&quot;</span>, 
                                <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;yellow&quot;</span>)
<span class="kw">levels</span>(mushroom$cap_surface) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;fibrous&quot;</span>, <span class="st">&quot;grooves&quot;</span>, <span class="st">&quot;scaly&quot;</span>, <span class="st">&quot;smooth&quot;</span>)
<span class="kw">levels</span>(mushroom$bruises) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;no&quot;</span>, <span class="st">&quot;yes&quot;</span>)
<span class="kw">levels</span>(mushroom$odor) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;almond&quot;</span>, <span class="st">&quot;creosote&quot;</span>, <span class="st">&quot;foul&quot;</span>, <span class="st">&quot;anise&quot;</span>, <span class="st">&quot;musty&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;pungent&quot;</span>, <span class="st">&quot;spicy&quot;</span>, <span class="st">&quot;fishy&quot;</span>)
<span class="kw">levels</span>(mushroom$gill_attachement) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;attached&quot;</span>, <span class="st">&quot;free&quot;</span>)
<span class="kw">levels</span>(mushroom$gill_spacing) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;close&quot;</span>, <span class="st">&quot;crowded&quot;</span>)
<span class="kw">levels</span>(mushroom$gill_size) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;broad&quot;</span>, <span class="st">&quot;narrow&quot;</span>)
<span class="kw">levels</span>(mushroom$gill_color) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;buff&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;gray&quot;</span>, <span class="st">&quot;chocolate&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;orange&quot;</span>, 
                                 <span class="st">&quot;pink&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;yellow&quot;</span>)
<span class="kw">levels</span>(mushroom$stalk_shape) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;enlarging&quot;</span>, <span class="st">&quot;tapering&quot;</span>)
<span class="kw">levels</span>(mushroom$stalk_root) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;missing&quot;</span>, <span class="st">&quot;bulbous&quot;</span>, <span class="st">&quot;club&quot;</span>, <span class="st">&quot;equal&quot;</span>, <span class="st">&quot;rooted&quot;</span>)
<span class="kw">levels</span>(mushroom$stalk_surface_above_ring) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;fibrous&quot;</span>, <span class="st">&quot;silky&quot;</span>, <span class="st">&quot;smooth&quot;</span>, <span class="st">&quot;scaly&quot;</span>)
<span class="kw">levels</span>(mushroom$stalk_surface_below_ring) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;fibrous&quot;</span>, <span class="st">&quot;silky&quot;</span>, <span class="st">&quot;smooth&quot;</span>, <span class="st">&quot;scaly&quot;</span>)
<span class="kw">levels</span>(mushroom$stalk_color_above_ring) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;buff&quot;</span>, <span class="st">&quot;cinnamon&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;gray&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;pink&quot;</span>, 
                                <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;yellow&quot;</span>)
<span class="kw">levels</span>(mushroom$stalk_color_below_ring) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;buff&quot;</span>, <span class="st">&quot;cinnamon&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;gray&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;pink&quot;</span>, 
                                <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;yellow&quot;</span>)
<span class="kw">levels</span>(mushroom$veil_type) &lt;-<span class="st"> &quot;partial&quot;</span>
<span class="kw">levels</span>(mushroom$veil_color) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;brown&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;yellow&quot;</span>)
<span class="kw">levels</span>(mushroom$ring_number) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>)
<span class="kw">levels</span>(mushroom$ring_type) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;evanescent&quot;</span>, <span class="st">&quot;flaring&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;pendant&quot;</span>)
<span class="kw">levels</span>(mushroom$spore_print_color) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;buff&quot;</span>, <span class="st">&quot;chocolate&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;orange&quot;</span>, 
                                        <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;yellow&quot;</span>)
<span class="kw">levels</span>(mushroom$population) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;abundant&quot;</span>, <span class="st">&quot;clustered&quot;</span>, <span class="st">&quot;numerous&quot;</span>, <span class="st">&quot;scattered&quot;</span>, <span class="st">&quot;several&quot;</span>, <span class="st">&quot;solitary&quot;</span>)
<span class="kw">levels</span>(mushroom$habitat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;wood&quot;</span>, <span class="st">&quot;grasses&quot;</span>, <span class="st">&quot;leaves&quot;</span>, <span class="st">&quot;meadows&quot;</span>, <span class="st">&quot;paths&quot;</span>, <span class="st">&quot;urban&quot;</span>, <span class="st">&quot;waste&quot;</span>)


<span class="kw">glimpse</span>(mushroom)</code></pre></div>
<pre><code>## Observations: 8,124
## Variables: 23
## $ edibility                &lt;fctr&gt; poisonous, edible, edible, poisonous...
## $ cap_shape                &lt;fctr&gt; convex, convex, bell, convex, convex...
## $ cap_surface              &lt;fctr&gt; scaly, scaly, scaly, smooth, scaly, ...
## $ cap_color                &lt;fctr&gt; brown, yellow, white, white, gray, y...
## $ bruises                  &lt;fctr&gt; yes, yes, yes, yes, no, yes, yes, ye...
## $ odor                     &lt;fctr&gt; pungent, almond, anise, pungent, non...
## $ gill_attachement         &lt;fctr&gt; free, free, free, free, free, free, ...
## $ gill_spacing             &lt;fctr&gt; close, close, close, close, crowded,...
## $ gill_size                &lt;fctr&gt; narrow, broad, broad, narrow, broad,...
## $ gill_color               &lt;fctr&gt; black, black, brown, brown, black, b...
## $ stalk_shape              &lt;fctr&gt; enlarging, enlarging, enlarging, enl...
## $ stalk_root               &lt;fctr&gt; equal, club, club, equal, equal, clu...
## $ stalk_surface_above_ring &lt;fctr&gt; smooth, smooth, smooth, smooth, smoo...
## $ stalk_surface_below_ring &lt;fctr&gt; smooth, smooth, smooth, smooth, smoo...
## $ stalk_color_above_ring   &lt;fctr&gt; purple, purple, purple, purple, purp...
## $ stalk_color_below_ring   &lt;fctr&gt; purple, purple, purple, purple, purp...
## $ veil_type                &lt;fctr&gt; partial, partial, partial, partial, ...
## $ veil_color               &lt;fctr&gt; white, white, white, white, white, w...
## $ ring_number              &lt;fctr&gt; one, one, one, one, one, one, one, o...
## $ ring_type                &lt;fctr&gt; pendant, pendant, pendant, pendant, ...
## $ spore_print_color        &lt;fctr&gt; black, brown, brown, black, brown, b...
## $ population               &lt;fctr&gt; scattered, numerous, numerous, scatt...
## $ habitat                  &lt;fctr&gt; urban, grasses, meadows, urban, gras...</code></pre>
<p>As each variables is categorical, let’s see how many categories are we speaking about?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tibble)
number_class &lt;-<span class="st"> </span>function(x){
  x &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">levels</span>(x))
}

x &lt;-<span class="st"> </span>mushroom %&gt;%<span class="st"> </span><span class="kw">map_dbl</span>(function(.x) <span class="kw">number_class</span>(.x)) %&gt;%<span class="st"> </span><span class="kw">as_tibble</span>() %&gt;%<span class="st"> </span>
<span class="st">       </span><span class="kw">rownames_to_column</span>() %&gt;%<span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(value))
<span class="kw">colnames</span>(x) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Variable name&quot;</span>, <span class="st">&quot;Number of levels&quot;</span>)
<span class="kw">print</span>(x)</code></pre></div>
<pre><code>## # A tibble: 23 × 2
##           `Variable name` `Number of levels`
##                     &lt;chr&gt;              &lt;dbl&gt;
## 1              gill_color                 12
## 2               cap_color                 10
## 3  stalk_color_above_ring                 10
## 4  stalk_color_below_ring                 10
## 5                    odor                  9
## 6       spore_print_color                  9
## 7                 habitat                  7
## 8               cap_shape                  6
## 9              population                  6
## 10             stalk_root                  5
## # ... with 13 more rows</code></pre>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="import-the-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="understand-the-data.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/fderyckel/bookdown-demo/edit/master/04-mushrooms.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
